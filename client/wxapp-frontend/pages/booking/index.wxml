<view class="booking-container">
  <!-- 顶部通知栏 -->
  <van-notice-bar
    left-icon="volume-o"
    text="请选择您需要的服务并填写相关信息"
  />

  <!-- 套餐信息 -->
  <van-cell-group title="预约套餐">
    <van-cell title="{{ packageInfo.name }}" value="¥{{ packageInfo.price }}" />
  </van-cell-group>

  <!-- 时间选择 -->
  <van-cell-group title="选择时间">
    <van-cell 
      title="预约日期" 
      value="{{ selectedDate || '请选择日期' }}" 
      is-link 
      bind:click="showCalendar"
    />
    <van-cell 
      title="预约时间" 
      value="{{ selectedTime || '请选择时间' }}" 
      is-link 
      bind:click="showTimePicker"
      disabled="{{ !selectedDate }}"
    />
  </van-cell-group>

  <!-- 客户信息 -->
  <van-cell-group title="客户信息">
    <van-field
      label="姓名"
      value="{{ customerInfo.name }}"
      placeholder="请输入姓名"
      bind:change="onNameChange"
      required
    />
    <van-field
      label="手机号"
      value="{{ customerInfo.phone }}"
      placeholder="请输入手机号"
      type="number"
      maxlength="11"
      bind:change="onPhoneChange"
      required
    />
    <van-field
      label="备注"
      value="{{ customerInfo.remark }}"
      placeholder="请输入特殊需求或备注"
      type="textarea"
      autosize
      bind:change="onRemarkChange"
    />
  </van-cell-group>

  <!-- 提交按钮 -->
  <view class="submit-section">
    <van-button
      type="primary"
      size="large"
      loading="{{ submitting }}"
      bind:click="onSubmitBooking"
      custom-class="submit-btn"
    >
      确认预约
    </van-button>
  </view>

  <!-- 日历弹窗 -->
  <van-calendar
    show="{{ showCalendarPopup }}"
    bind:close="hideCalendar"
    bind:confirm="onDateSelect"
    min-date="{{ minDate }}"
    max-date="{{ maxDate }}"
  />

  <!-- 时间选择弹窗 -->
  <van-popup
    show="{{ showTimePickerPopup }}"
    position="bottom"
    bind:close="hideTimePicker"
  >
    <van-picker
      show-toolbar
      title="选择时间"
      columns="{{ timeSlots }}"
      bind:confirm="onTimeSelect"
      bind:cancel="hideTimePicker"
    />
  </van-popup>

  <!-- 全局loading -->
  <van-loading wx:if="{{ loading }}" type="spinner" size="30px" vertical custom-class="global-loading">
    加载中...
  </van-loading>
</view>

# 乖宝宝影楼小程序测试页面功能清单

## 1. 基础功能测试

### 1.1 用户认证模块
- [ ] 微信授权登录测试
- [ ] 用户信息获取测试
- [ ] 登录状态维持测试
- [ ] 退出登录测试

### 1.2 套系管理模块
- [ ] 套系列表显示测试
- [ ] 套系详情查看测试
- [ ] 套系图片加载测试
- [ ] 套系价格显示测试

### 1.3 预约流程模块
- [ ] 时间段选择测试
- [ ] 预约信息填写测试
- [ ] 预约提交测试
- [ ] 预约确认测试

### 1.4 支付流程模块
- [ ] 支付方式选择测试
- [ ] 微信支付调用测试
- [ ] 支付状态回调测试
- [ ] 支付结果处理测试

## 2. 查找功能测试

### 2.1 用户查找功能测试

#### 2.1.1 手机号码查找用户
```javascript
// 测试用例：精确手机号码查找
testCases: [
  {
    name: "精确手机号码查找用户",
    input: { phone: "13800138000" },
    expected: "返回匹配用户信息",
    testData: ["13800138000", "13800138001", "13900139000"]
  },
  {
    name: "不存在的手机号码查找",
    input: { phone: "99999999999" },
    expected: "返回空结果",
    testData: []
  },
  {
    name: "无效手机号码格式",
    input: { phone: "123" },
    expected: "返回参数错误",
    testData: null
  }
]
```

#### 2.1.2 用户昵称查找用户
```javascript
// 测试用例：模糊昵称查找
testCases: [
  {
    name: "精确昵称查找",
    input: { nickname: "张三", fuzzy: false },
    expected: "返回昵称为张三的用户",
    testData: ["张三"]
  },
  {
    name: "模糊昵称查找",
    input: { nickname: "张", fuzzy: true },
    expected: "返回包含张的所有用户",
    testData: ["张三", "张小明", "小张"]
  }
]
```

### 2.2 订单查找功能测试

#### 2.2.1 手机号码查找订单
- [ ] 测试存在订单的手机号码查找
- [ ] 测试无订单的手机号码查找
- [ ] 测试无效手机号码格式
- [ ] 测试返回订单列表的完整性
- [ ] 测试分页功能

#### 2.2.2 时间区间查找订单
```javascript
// 测试用例：时间区间查找
testCases: [
  {
    name: "有效时间区间查找",
    input: { 
      start_date: "2024-01-01", 
      end_date: "2024-01-31" 
    },
    expected: "返回时间区间内的订单",
    validation: "订单日期在指定范围内"
  },
  {
    name: "跨年时间区间查找",
    input: { 
      start_date: "2023-12-01", 
      end_date: "2024-01-31" 
    },
    expected: "返回跨年区间内的订单",
    validation: "正确处理跨年数据"
  },
  {
    name: "无效时间区间",
    input: { 
      start_date: "2024-01-31", 
      end_date: "2024-01-01" 
    },
    expected: "返回参数错误",
    validation: "开始时间不能晚于结束时间"
  }
]
```

#### 2.2.3 支付状态查找订单
- [ ] 已支付订单查找测试
- [ ] 未支付订单查找测试
- [ ] 支付失败订单查找测试
- [ ] 退款订单查找测试
- [ ] 多状态组合查找测试

#### 2.2.4 套系名称查找订单
- [ ] 精确套系名称查找测试
- [ ] 模糊套系名称查找测试
- [ ] 不存在套系名称查找测试
- [ ] 特殊字符套系名称测试

### 2.3 套系查找功能测试

#### 2.3.1 价格区间查找套系
```javascript
// 测试用例：价格区间查找
testCases: [
  {
    name: "正常价格区间查找",
    input: { min_price: 500, max_price: 1500 },
    expected: "返回价格在500-1500元的套系",
    validation: "所有返回套系价格在指定范围内"
  },
  {
    name: "开放式区间查找（仅最低价）",
    input: { min_price: 1000 },
    expected: "返回价格≥1000元的套系",
    validation: "所有返回套系价格≥1000"
  },
  {
    name: "开放式区间查找（仅最高价）",
    input: { max_price: 800 },
    expected: "返回价格≤800元的套系",
    validation: "所有返回套系价格≤800"
  },
  {
    name: "无效价格区间",
    input: { min_price: 1500, max_price: 500 },
    expected: "返回参数错误",
    validation: "最低价不能高于最高价"
  }
]
```

### 2.4 支付查找功能测试

#### 2.4.1 手机号码查找支付状态
- [ ] 查找用户所有支付记录
- [ ] 查找用户成功支付记录
- [ ] 查找用户失败支付记录
- [ ] 查找用户退款记录
- [ ] 支付记录时间排序测试

### 2.5 关联查找功能测试

#### 2.5.1 手机号码查找用户订过的套系
```javascript
// 测试用例：用户套系历史查找
testCases: [
  {
    name: "查找用户套系历史",
    input: { phone: "13800138000" },
    expected: "返回用户订购过的所有套系",
    validation: "包含套系详情和订购时间"
  },
  {
    name: "查找无订单用户的套系",
    input: { phone: "13800138999" },
    expected: "返回空的套系列表",
    validation: "正确处理无历史记录的用户"
  },
  {
    name: "查找多次订购同一套系的用户",
    input: { phone: "13800138000" },
    expected: "返回套系列表（去重或显示次数）",
    validation: "正确处理重复订购情况"
  }
]
```

## 3. 性能测试

### 3.1 查找功能性能测试
- [ ] 大数据量下的查找响应时间测试
- [ ] 并发查找请求处理测试
- [ ] 模糊查找性能测试
- [ ] 复合条件查找性能测试

### 3.2 数据库索引效果测试
- [ ] 手机号码索引查找效果测试
- [ ] 时间范围索引查找效果测试
- [ ] 价格范围索引查找效果测试
- [ ] 复合索引查找效果测试

## 4. 安全测试

### 4.1 权限验证测试
- [ ] 未登录用户访问查找接口测试
- [ ] 普通用户访问管理员查找接口测试
- [ ] Token过期时的查找接口测试
- [ ] 跨用户数据访问测试

### 4.2 输入验证测试
- [ ] SQL注入攻击测试
- [ ] XSS攻击测试
- [ ] 参数篡改测试
- [ ] 恶意输入过滤测试

## 5. 边界测试

### 5.1 数据边界测试
- [ ] 空字符串输入测试
- [ ] 超长字符串输入测试
- [ ] 特殊字符输入测试
- [ ] 数值边界值测试

### 5.2 分页边界测试
- [ ] 第一页数据测试
- [ ] 最后一页数据测试
- [ ] 超出范围页码测试
- [ ] 页码为0或负数测试

## 6. 兼容性测试

### 6.1 不同客户端测试
- [ ] 微信小程序端查找功能测试
- [ ] 管理后台Web端查找功能测试
- [ ] 移动端H5查找功能测试

### 6.2 不同数据格式测试
- [ ] 不同日期格式兼容性测试
- [ ] 不同价格格式兼容性测试
- [ ] 不同手机号码格式兼容性测试

## 7. 测试数据准备

### 7.1 基础测试数据
```javascript
// 用户测试数据
const testUsers = [
  { openid: "user001", nickname: "张三", phone: "13800138000" },
  { openid: "user002", nickname: "李四", phone: "13800138001" },
  { openid: "user003", nickname: "王五", phone: "13900139000" },
  { openid: "user004", nickname: "赵六", phone: "13700137000" }
];

// 套系测试数据
const testPackages = [
  { id: 1, name: "儿童写真套系A", price: 888.00 },
  { id: 2, name: "儿童写真套系B", price: 1288.00 },
  { id: 3, name: "亲子写真套系", price: 1688.00 },
  { id: 4, name: "百天照套系", price: 588.00 }
];

// 订单测试数据
const testOrders = [
  { 
    order_no: "ORD202401001", 
    user_id: "user001", 
    package_id: 1,
    appointment_date: "2024-01-15",
    payment_status: "PAID",
    order_status: "CONFIRMED" 
  },
  // ... 更多测试数据
];
```

## 8. 测试报告模板

### 8.1 测试结果记录
- [ ] 测试用例执行结果
- [ ] 发现的问题及严重程度
- [ ] 性能指标记录
- [ ] 建议改进方案

### 8.2 缺陷跟踪
- [ ] 缺陷描述与重现步骤
- [ ] 缺陷修复验证
- [ ] 回归测试结果
- [ ] 最终验收结果

---

## 测试执行检查清单

- [ ] 所有查找功能基础测试完成
- [ ] 性能测试达到预期指标
- [ ] 安全测试无重大漏洞
- [ ] 边界测试覆盖完整
- [ ] 兼容性测试通过
- [ ] 测试数据清理完成
- [ ] 测试报告提交完成

此测试清单确保查找功能的全面测试覆盖，保障系统的稳定性和安全性。
